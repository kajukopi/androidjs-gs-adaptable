<style>

</style>
<form action="/" method="post" id="form-post" onsubmit="disableForm(this);">
  <div class="form-outline mb-3">
    <input type="text" id="todo" name="todo" class="form-control" autocomplete="off" required/>
    <label class="form-label" for="todo">Todo</label>
  </div>
  <button type="submit" class="btn btn-primary btn-block">Add</button>
</form>

<table class="table table-borderless table-hover">
  <thead>
    <tr>
      <th scope="col">Todo List</th>
      <th scope="col">Action</th>
    </tr>
  </thead>
  <tbody>
    {{#each todos}}
      <tr>
        <td>
          <form action="/{{this._id}}?_method=PUT" method="post" id="form-update" onsubmit="disableForm(this);">
            <div class="form-outline">
              <input type="text" id="todo" name="todo" value="{{this.todo}}" class="form-control small" required />
              <label class="form-label" for="todo">Todo</label>
            </div>
          </form>
          
        </td>
        </form>
        <td class="d-flex justify-content-between align-items-center h-100">
          <button type="submit" class="btn btn-primary btn-sm me-1" form="form-update">Update</button>
          <button type="submit" class="btn btn-secondary btn-sm ms-1" form="form-delete">Delete</button>
        </td>
      </tr>
      <form class="" action="/{{this._id}}?_method=DELETE" method="post" id="form-delete" onsubmit="disableForm(this);"></form>
    {{/each}}
  </tbody>
</table>
<script>
  function disableForm() { document.querySelectorAll('form').forEach((form) => { const elements = form.elements; for (let i = 0; i < elements.length; i++) { if(elements[i].classList.contains("btn")) elements[i].disabled = true;
  if(elements[i].classList.contains("form-control")) elements[i].classList.add("pe-none"); } }) }
</script>